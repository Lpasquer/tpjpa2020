/*C5*/SET SCHEMA PUBLIC
drop table if exists Fiche CASCADE 
drop table if exists Fiche_Tag CASCADE 
drop table if exists Tag CASCADE 
drop table if exists Tag_Fiche CASCADE 
drop table if exists Utilisateur CASCADE 
drop sequence hibernate_sequence if exists
create sequence hibernate_sequence start with 1 increment by 1
create table Fiche (id bigint not null, date_butoire varchar(255), libelle varchar(255), lieu varchar(255), notes varchar(255), time integer not null, url varchar(255), user_id bigint, primary key (id))
create table Fiche_Tag (Fiche_id bigint not null, tags_id bigint not null)
create table Tag (id bigint not null, name varchar(255), primary key (id))
create table Tag_Fiche (Tag_id bigint not null, fiches_id bigint not null)
create table Utilisateur (id bigint not null, name varchar(255), primary key (id))
alter table Fiche add constraint FKbvhjcpdasp8hdojdytreowumw foreign key (user_id) references Utilisateur
alter table Fiche_Tag add constraint FK4cuhkc7msctu5jfw8hgyjemul foreign key (tags_id) references Tag
alter table Fiche_Tag add constraint FK7a4bdutf6boh0oxba3tsnhxu7 foreign key (Fiche_id) references Fiche
alter table Tag_Fiche add constraint FKjsk5um0c4s01oalqphululf0b foreign key (fiches_id) references Fiche
alter table Tag_Fiche add constraint FKectj8u0e1wyew6p3c73iddser foreign key (Tag_id) references Tag
INSERT INTO FICHE VALUES(1,'15/01/2021','Fiche 1','Rennes',NULL,60,'http://blabla',NULL)
INSERT INTO TAG VALUES(2,'Tag 1')
INSERT INTO UTILISATEUR VALUES(3,'Michael')
INSERT INTO UTILISATEUR VALUES(4,'Captain Nemo')
INSERT INTO FICHE VALUES(5,'15/01/2021','Fiche 2','Rennes',NULL,240,'http://blabla',4)
DELETE FROM FICHE WHERE ID=1
INSERT INTO FICHE VALUES(1,'15/01/2021','Fiche 1','Rennes',NULL,60,'http://blabla',3)
INSERT INTO FICHE_TAG VALUES(5,2)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 6
COMMIT
DISCONNECT
